{% extends "base.html" %}
{% block title %}
    首页
{% endblock %}
{% block extra_head %}
    <script type="text/javascript">

    function alertpwd(){
        da=$("#pwd_div").serialize();
        $.ajax({
            type: "POST",
            data: da,
            url: "{% url "userinfo" %}",
            dataType: "html",
            success: function(html, textStatus) {
                alert("修改成功！");
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert("修改失败！")
            }
        });
    };

    $(function(){
        $("#topwd_div").click(function () {
            $("#goback").show();
            $("#info").hide();
            $("#pwd_div").show();
            $("#real_div").hide();
        });
        $("#toreal_div").click(function () {
            $("#goback").show();
            $("#info").hide();
            $("#pwd_div").hide();
            $("#real_div").show();
        });
        $("#goback").click(function () {
            $("#goback").hide();
            $("#info").show();
            $("#pwd_div").hide();
            $("#real_div").hide();
        });
    });
    </script>
    <style>
    .leftnav{
        display: inline-block;
        width: 200px;
        height: 300px;
        border: 2px solid #1E81C4;
        border-radius: 3px;
        margin: 5px;
        overflow: hidden;
        vertical-align: top;
    }
    .leftnav dl{
        display:block;
        width: 200px;
        text-align: center;
    }
    .leftnav dl dt{
        display: block;
        width:100%;
        height: 40px;
        line-height: 40px;
        text-align: left;
        background-color:#5bc0de;
    }
    .leftnav dl dd{
        height: 30px;
        line-height: 30px;
    }
    .leftnav dl dd:hover{
         background-color: #a6e1ec;
    }
    .rightcent{
        width: 800px;
        min-height:600px;
        display: inline-block;
        border: 2px solid #1E81C4;
        border-radius: 3px;
        margin: 5px;
        overflow: hidden;
    }
    #real_div{
        display: none;
        width: 90%;
        margin: auto;
        margin-top: 10px;
        text-align: center;
    }
    #pwd_div{
        display: none;
        width: 90%;
        margin: auto;
        margin-top: 10px;
        text-align: center;
    }
    </style>
{% endblock %}

{% block content%}{% load staticfiles %}
    <div style="margin:auto; padding: 0px; width: 100%;text-align: center;overflow:hidden">

    <div class="leftnav">
        <dl>
            <dt>用户信息</dt>
            <dd style="background-color: #a6e1ec"><a href="#">用户信息管理</a></dd>
            <dd><a href="{% url "contactinfo" %}">联系人管理</a></dd>
            <dt>订单</dt>
            <dd><a href="#">订单</a></dd>
            <dd><a href="#">退订</a></dd>
        </dl>
    </div>
    <div class="rightcent">
        <div style="margin-top: 10px">
            <input id="toreal_div" type="button" class="btn btn-info btn-sm" value="添加身份">
            <input id="topwd_div" type="button" class="btn btn-warning btn-sm" value="修改密码">
            <input id="goback" style="display: none" type="button" class="btn btn-default" value="返回">
        </div>
        <div id="real_div">
            <table class="table">
                <tr>
                    <td><label>真实姓名:</label></td>
                    <td><input type="text" class="form-control"></td>
                </tr>
                <tr>
                    <td><label>电话:</label></td>
                    <td><input type="tel" class="form-control"></td>
                </tr>
                <tr>
                    <td><label>身份证:</label></td>
                    <td><input type="text" class="form-control"></td>
                </tr>
                {% if user.realName %}
                    <tr>
                        <td colspan="2"><input type="button" value="保存" class="btn btn-default"></td>
                    </tr>
                {% endif %}
            </table>
        </div>
        <form id="pwd_div">
            <table class="table">
                <tr>
                    <td><label>旧密码:</label></td>
                    <td><input name="ch_oldpwd" type="password" class="form-control"></td>
                </tr>
                <tr>
                    <td><label>新密码:</label></td>
                    <td><input name="ch_cifpwd1" type="password" class="form-control"></td>
                </tr>
                <tr>
                    <td><label>确认新密码:</label></td>
                    <td><input name="ch_cifpwd2" type="password" class="form-control"></td>
                </tr>
                <tr>
                    <td colspan="2"><input type="button" onclick="alertpwd()" value="修改" class="btn btn-default"></td>
                </tr>
            </table>
        </form>
    <table id="info" class="table table-striped table-bordered table-hover table-condensed">
    <tbody>
        <tr>
            <td><label>用户名:</label></td>
            <td>{{ user.nickName }}</td>
        </tr>
        <tr>
            <td><label>邮箱:</label></td>
            <td>{{ user.userEmail }}</td>
        </tr>
        <tr>
            <td><label>真实姓名:</label></td>
            <td>{{ user.realName }}</td>
        </tr>
        <tr>
            <td><label>身份证:</label></td>
            <td>{{ user.idCard }}</td>
        </tr>
        <tr>
            <td><label>手机号:</label></td>
            <td>{{ user.phoneNum }}</td>
        </tr>
    </tbody>
    </table>
    </div>
    </div>
{% endblock %}